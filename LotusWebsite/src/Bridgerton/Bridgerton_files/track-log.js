!function(t,e){function n(t){V&&!V._adInfoPromise&&(V._adInfoPromise=t),_taq&&!_taq._adInfoPromise&&(_taq._adInfoPromise=t)}function o(){return V&&V._adInfoPromise?V._adInfoPromise:_taq&&_taq._adInfoPromise?_taq._adInfoPromise:null}function r(t,e){try{_taq.monitor.info(t,e)}catch(n){}}function i(t,e){try{_taq.monitor.error(t,e)}catch(n){}}function a(t){try{w=t,_taq.context.data.adInfo.req_id=t}catch(e){}}function s(t){try{S=t,_taq.context.data.adInfo.log_extra=t}catch(e){}}function c(t){try{U=t,_taq.context.data.adInfo.ad_id=t}catch(e){}}function d(t){try{x=t,_taq.context.data.adInfo.creative_id=t}catch(e){}}function u(t){try{A=t,_taq.context.data.adInfo.ad_info_from=t}catch(e){}}function _(t){try{L=t,_taq.context.data.adInfo.ad_info_status=t}catch(e){}}function f(){function f(t,e,n){for(var o=0;o<t.length;o++)document.addEventListener(t[o],e,n)}function g(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),i=0;i<VENDOR_PREFIXES.length;){if(n=VENDOR_PREFIXES[i],o=n?n+r:e,o in t)return t[o];i++}return void 0}function V(t){if(!(this instanceof V))throw new TypeError("Constructor Promise requires `new`");if(!K(t))throw new TypeError("Must pass resolver function");this._state=H,this._value=[],this._isChainEnd=!0,ne(this,Y(this,G),Y(this,X),{then:t})}function G(t,e,n,o){return e?(o||(o=new W(this.constructor)),me(ee(o,e,t)),o.promise):(z(o,G,t),this)}function X(t,e,n,o){return n?(o||(o=new W(this.constructor)),me(ee(o,n,t)),o.promise):(z(o,X,t),this)}function H(t,e,n,o){if(!o){if(!e&&!n)return this;o=new W(this.constructor)}return t.push({deferred:o,onFulfilled:e||o.resolve,onRejected:n||o.reject}),o.promise}function W(t){var e=this;return this.promise=new t(function(t,n){e.resolve=t,e.reject=n}),e}function Q(t,e,n,o){var r=t._value;t._state=e,t._value=n,o&&e===H&&o._state(n,void 0,void 0,{promise:t,resolve:void 0,reject:void 0});for(var i=0;i<r.length;i++){var a=r[i];t._state(n,a.onFulfilled,a.onRejected,a.deferred)}r.length=0,e===X&&t._isChainEnd&&setTimeout(function(){t._isChainEnd&&ve(n,t)},0)}function Y(t,e){return function(n){Q(t,e,n)}}function z(t,e,n){if(t){var o=t.promise;o._state=e,o._value=n}}function $(){}function K(t){return"function"==typeof t}function Z(t){return t===Object(t)}function te(t,e){for(var n=0;n<t.length;n++)e(t[n],n)}function ee(t,e,n){var o=t.promise,r=t.resolve,i=t.reject;return function(){try{var t=e(n);ne(o,r,i,t,t)}catch(t){i(t)}}}function ne(t,e,n,o,r){var i,a,s=n;try{if(o===t)throw new TypeError("Cannot fulfill promise with itself");var c=Z(o);c&&o instanceof t.constructor?Q(t,o._state,o._value,o):c&&(i=o.then)&&K(i)?(a=function(o){a=s=$,ne(t,e,n,o,o)},s=function(t){a=s=$,n(t)},i.call(r,function(t){a(t)},function(t){s(t)})):e(o)}catch(t){s(t)}}var oe,re,ie=t._page_type?t._page_type:0,ae=(t._tt_config,{combineData:function(){for(var t={},e=Array.prototype.slice.call(arguments),n=0;n<e.length;n++)for(var o in e[n])t[o]&&e[n][o]&&(t[o]=e[n][o]),t[o]||void 0===e[n][o]||null===e[n][o]||(t[o]=e[n][o]);return t},getOS:function(){var t=navigator.userAgent,e={android:t.match(/(Android)\s+([\d.]+)/),ipad:t.match(/(iPad).*OS\s([\d_]+)/),iphone:t.match(/(iPhone\sOS)\s([\d_]+)/)},n="";return e.android?n="android":(e.ipad||e.iphone)&&(n="ios"),n},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isInApp:function(){return"external"!==window._taq._env.env},isTiktok:function(){return"tiktok"===window._taq._env.env},getDefer:function(){var t={},e=new V(function(e,n){t.resolve=e,t.reject=n});return t.promise=e,t},getTestID:function(){var t=this.getLocationURLParam("tt_test_id"),e=this.getCookie("tt_test_id");return t&&t!==e&&this.setCookie("tt_test_id",t),t||e},getLocationURLParam:function(t){return this.getUrlSearchParams(window.location.href,t)||this.getUrlSearchParams(document.referrer,t)},getUrlSearchParams:function(t,e){if(""===t)return"";var n=new URL(t),o=n.searchParams;return o.get(e)||""},setCookie:function(t,e){var n=t+" = "+e;document.cookie=n},getCookie:function(t){if(document.cookie.length>0){var e=document.cookie.indexOf(t+"=");if(-1!=e){var n=e+t.length+1,o=document.cookie.indexOf(";",n);return unescape(-1==o?document.cookie.substring(n):document.cookie.substring(n,o))}}return""},getLocationParam:function(t){var e={QueryString:function(t){var e=window.location.href,n=new RegExp("[&?]{1}"+t+"=([^&?|^#?]*)","ig");return e.match(n)?decodeURI(e.match(n)[0].substr(t.length+2)):(e=document.referrer,e.match(n)?decodeURI(e.match(n)[0].substr(t.length+2)):"")}};return e.QueryString(t)},queryToJson:function(t){for(var e,n,o,r,i=t.substr(t.lastIndexOf("?")+1),a=i.split("&"),s=a.length,c={},d=0;s>d;d++)a[d]&&(r=a[d].split("="),e=r[0],n=r[1],o=c[e],"undefined"==typeof o?c[e]=n:this.isArray(o)?o.push(n):c[e]=[o,n]);return c},getSdkPath:function(){var t="",e="",n=["s0.","s1.","s2.","s3."],o=n.length;if(O)t=O.src;else for(var r=document.getElementsByTagName("script"),i=r.length||0,a=0;i>a;a++){var s=r[a].src;-1!==s.indexOf("track-log")&&(t=s)}for(var a=0;o>a;a++)-1!==t.indexOf(n[a])&&(e=n[a]);return e},jsonToQuery:function(t){var e=[];t=t||{};var n=/^(?:string|boolean|number)/i;for(var o in t)t.hasOwnProperty(o)&&n.test(typeof t[o])&&e.push(o+"="+t[o]);return e.join("&")},extend:function(t,e){for(var n in e)t[n]=e[n]},getAdId:function(){var t=ae.getLocationParam("_tt_ad_id")||ae.getLocationParam("ad_id")||ae.getLocationParam("aid");return t},getReqId:function(){return ae.getLocationParam("req_id")||""},getCid:function(){return ae.getLocationParam("cid")||""},getWebUrlInfo:function(){var t,e=window.decodeURIComponent(ae.getLocationParam("_toutiao_params")||ae.getLocationParam("_toutiao_recommend")||"");try{t=JSON.parse(e)}catch(n){}return t},encodeParams:function(t){var e=[];t=t||{};var n=/^(?:string|boolean|number)/i;for(var o in t)if(t.hasOwnProperty(o)&&n.test(typeof t[o])){var r=decodeURIComponent(t[o]);e.push(encodeURIComponent(o)+"="+encodeURIComponent(r))}return e.join("&")},syncGet:function(t,e){var n=e||0,o=this,r=new XMLHttpRequest;r.open("GET",t.url,!1),r.withCredentials=!0,r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&1>n&&(n++,o.syncGet(t,n))},r.send(null)},retry:function(t,e){function n(){t(function(t){t&&e>o&&(o++,n())})}var e=e||1,o=0;n()},getGWUrl:function(){return"https://analytics.tiktok.com/api/v2/pixel"},imageGet:function(t){var e=new Image;e.src=window.location.protocol+t.url+"&t="+new Date},addLoadEvent:function(t){var e=window.onload;window.onload="function"!=typeof window.onload?t:function(){e(),t()}},getSiteId:function(){var t=window.location.pathname,e=/\d+/g,n=t.match(e)||[];return n[0]||""},setToSessionStorage:function(t,e){var n=window.sessionStorage;n.setItem(t,e)},getFromSessionStorage:function(t){var e=window.sessionStorage;return e.getItem(t)},isNewJSBirdgeSuccess:function(t){return 1===t.code&&"JSB_SUCCESS"===t.ret&&t.data?!0:!1},_sendEvent:function(t){if(ae.isTiktok()){var e={eventName:t.tag,labelName:t.label,value:t.value?t.value:"0",extValue:"0",extJson:t};window.ToutiaoJSBridge.call("sendLog",e)}else{var n={event_name:t.label,version:2,properties:t};window.ToutiaoJSBridge.call("track_event",n)}},generateRequestUrl:function(t,e){return t+="?"+ae.jsonToQuery(e)},getByImage:function(t,e){var n=new Image;n.src=ae.generateRequestUrl(t,e)},sendBeacon:function(t,e){return navigator.sendBeacon?navigator.sendBeacon(t,JSON.stringify(e)):!1},sendHTTPLogEvent:function(t,e,n){var o=ae.sendBeacon(t,n);o||ae.getByImage(t,{analytics_message:e.analytics_message})},base64URI:function(t){var e=t;try{e=btoa(t)}catch(n){e=btoa(encodeURIComponent(t))}return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},getEventType:function(t){var e={on_web_detail:"ViewContent",on_web_cart:"AddToCart",on_web_order:"Checkout",shopping:"Purchase",on_web_register:"Registration",view:"Browse",button:"ClickButton",consult:"Consult",form_detail:"ViewForm",form_button:"ClickForm",form:"SubmitForm",phone_detail:"ViewConsultationPage",phone_button:"ClickInConsultationPage",phone:"ConsultByPhone",download_detail:"ViewDownloadPage",download_button:"ClickInDownloadPage",download_start:"ClickToDownload",category:"Category",add_billing:"AddBilling",initiate_order:"StartCheckout",on_web_search:"Search"};return e[t]?e[t]:t}});!function(t){"use strict";function e(t,e){var n=(65535&t)+(65535&e),o=(t>>16)+(e>>16)+(n>>16);return o<<16|65535&n}function n(t,e){return t<<e|t>>>32-e}function o(t,o,r,i,a,s){return e(n(e(e(o,t),e(i,s)),a),r)}function r(t,e,n,r,i,a,s){return o(e&n|~e&r,t,e,i,a,s)}function i(t,e,n,r,i,a,s){return o(e&r|n&~r,t,e,i,a,s)}function a(t,e,n,r,i,a,s){return o(e^n^r,t,e,i,a,s)}function s(t,e,n,r,i,a,s){return o(n^(e|~r),t,e,i,a,s)}function c(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;var o,c,d,u,_,f=1732584193,g=-271733879,l=-1732584194,v=271733878;for(o=0;o<t.length;o+=16)c=f,d=g,u=l,_=v,f=r(f,g,l,v,t[o],7,-680876936),v=r(v,f,g,l,t[o+1],12,-389564586),l=r(l,v,f,g,t[o+2],17,606105819),g=r(g,l,v,f,t[o+3],22,-1044525330),f=r(f,g,l,v,t[o+4],7,-176418897),v=r(v,f,g,l,t[o+5],12,1200080426),l=r(l,v,f,g,t[o+6],17,-1473231341),g=r(g,l,v,f,t[o+7],22,-45705983),f=r(f,g,l,v,t[o+8],7,1770035416),v=r(v,f,g,l,t[o+9],12,-1958414417),l=r(l,v,f,g,t[o+10],17,-42063),g=r(g,l,v,f,t[o+11],22,-1990404162),f=r(f,g,l,v,t[o+12],7,1804603682),v=r(v,f,g,l,t[o+13],12,-40341101),l=r(l,v,f,g,t[o+14],17,-1502002290),g=r(g,l,v,f,t[o+15],22,1236535329),f=i(f,g,l,v,t[o+1],5,-165796510),v=i(v,f,g,l,t[o+6],9,-1069501632),l=i(l,v,f,g,t[o+11],14,643717713),g=i(g,l,v,f,t[o],20,-373897302),f=i(f,g,l,v,t[o+5],5,-701558691),v=i(v,f,g,l,t[o+10],9,38016083),l=i(l,v,f,g,t[o+15],14,-660478335),g=i(g,l,v,f,t[o+4],20,-405537848),f=i(f,g,l,v,t[o+9],5,568446438),v=i(v,f,g,l,t[o+14],9,-1019803690),l=i(l,v,f,g,t[o+3],14,-187363961),g=i(g,l,v,f,t[o+8],20,1163531501),f=i(f,g,l,v,t[o+13],5,-1444681467),v=i(v,f,g,l,t[o+2],9,-51403784),l=i(l,v,f,g,t[o+7],14,1735328473),g=i(g,l,v,f,t[o+12],20,-1926607734),f=a(f,g,l,v,t[o+5],4,-378558),v=a(v,f,g,l,t[o+8],11,-2022574463),l=a(l,v,f,g,t[o+11],16,1839030562),g=a(g,l,v,f,t[o+14],23,-35309556),f=a(f,g,l,v,t[o+1],4,-1530992060),v=a(v,f,g,l,t[o+4],11,1272893353),l=a(l,v,f,g,t[o+7],16,-155497632),g=a(g,l,v,f,t[o+10],23,-1094730640),f=a(f,g,l,v,t[o+13],4,681279174),v=a(v,f,g,l,t[o],11,-358537222),l=a(l,v,f,g,t[o+3],16,-722521979),g=a(g,l,v,f,t[o+6],23,76029189),f=a(f,g,l,v,t[o+9],4,-640364487),v=a(v,f,g,l,t[o+12],11,-421815835),l=a(l,v,f,g,t[o+15],16,530742520),g=a(g,l,v,f,t[o+2],23,-995338651),f=s(f,g,l,v,t[o],6,-198630844),v=s(v,f,g,l,t[o+7],10,1126891415),l=s(l,v,f,g,t[o+14],15,-1416354905),g=s(g,l,v,f,t[o+5],21,-57434055),f=s(f,g,l,v,t[o+12],6,1700485571),v=s(v,f,g,l,t[o+3],10,-1894986606),l=s(l,v,f,g,t[o+10],15,-1051523),g=s(g,l,v,f,t[o+1],21,-2054922799),f=s(f,g,l,v,t[o+8],6,1873313359),v=s(v,f,g,l,t[o+15],10,-30611744),l=s(l,v,f,g,t[o+6],15,-1560198380),g=s(g,l,v,f,t[o+13],21,1309151649),f=s(f,g,l,v,t[o+4],6,-145523070),v=s(v,f,g,l,t[o+11],10,-1120210379),l=s(l,v,f,g,t[o+2],15,718787259),g=s(g,l,v,f,t[o+9],21,-343485551),f=e(f,c),g=e(g,d),l=e(l,u),v=e(v,_);return[f,g,l,v]}function d(t){var e,n="",o=32*t.length;for(e=0;o>e;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function u(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var o=8*t.length;for(e=0;o>e;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function _(t){return d(c(u(t),8*t.length))}function f(t,e){var n,o,r=u(t),i=[],a=[];for(i[15]=a[15]=void 0,r.length>16&&(r=c(r,8*t.length)),n=0;16>n;n+=1)i[n]=909522486^r[n],a[n]=1549556828^r[n];return o=c(i.concat(u(e)),512+8*e.length),d(c(a.concat(o),640))}function g(t){var e,n,o="0123456789abcdef",r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+=o.charAt(e>>>4&15)+o.charAt(15&e);return r}function l(t){return unescape(encodeURIComponent(t))}function v(t){return _(l(t))}function m(t){return g(v(t))}function p(t,e){return f(l(t),l(e))}function h(t,e){return g(p(t,e))}function S(t,e,n){return e?n?p(e,t):h(e,t):n?v(t):m(t)}t.md5=S}(this);var se={getPrefix:function(t){var e="";try{e=t.split("_")[0]}catch(n){}return e},traversal:function(t,e,n,o,r){if(t&&1===t.nodeType&&!(n>=o)){var i="",a=this.getPrefix(e);r(e);for(var s,c=0,d=t.childNodes,u=0;c<d.length;c++)s=d[c],s&&1===s.nodeType&&(i=a+","+u+"_"+s.tagName,this.traversal(s,i,n+1,o,r),++u)}}};VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"];var ce,de=window,ue=void 0!==g(de,"PointerEvent"),_e="ontouchstart"in de;!function(t){t[t.Default=0]="Default",t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancle=8]="Cancle"}(ce||(ce={}));var fe={pointer:{events:["pointerdown","pointermove","pointerup","pointercancel"],handler:function(t){var e=t.type,n={status:ce.Default,timestamp:Date.now(),position:[t.clientX,t.clientY]};return e!==this.events[0]||0!==t.button&&"touch"!==t.pointerType?e===this.events[1]?n.status=ce.Move:e===this.events[2]?n.status=ce.End:e===this.events[3]&&(n.status=ce.Cancle):n.status=ce.Start,n}},touch:{events:["touchstart","touchmove","touchend","touchcancel"],handler:function(t){var e=t.type;if(1!==t.changedTouches.length)return null;var n={status:ce.Default,timestamp:Date.now(),position:[t.changedTouches[0].clientX,t.changedTouches[0].clientY]};return e===this.events[0]?n.status=ce.Start:e===this.events[1]?n.status=ce.Move:e===this.events[2]?n.status=ce.End:e===this.events[3]&&(n.status=ce.Cancle),n.status===ce.Default?null:n}},mouse:{events:["mousedown","mousemove","mouseup"],handler:function(t){var e=t.type,n={status:ce.Default,timestamp:Date.now(),position:[t.clientX,t.clientY]};return e===this.events[0]&&0===t.button?n.status=ce.Start:e===this.events[1]?n.status=ce.Move:e===this.events[2]&&(n.status=ce.End),n.status&ce.Move&&1!==t.which&&(n.status=ce.End),n.status===ce.Default?null:n}}};"MSPointerEvent"in de&&!("PointerEvent"in de)&&(fe.pointer.events=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"]);var ge={interval:300,time:250,threshold:9,posThreshold:10},le={};le.addClickEvent=function(t,e){var n=function(e){var n,o,r,i;return function(a){var s=fe[e].handler(a);if(null!==s){if(s.status&ce.Start)return n=ce.Start,o=s.timestamp,r=s.position,void(i=a.target);if(s.status&ce.End)n&ce.Start&&s.timestamp-o<ge.time&&Math.sqrt(Math.pow(s.position[0]-r[0],2)+Math.pow(s.position[1]-r[1],2))<ge.threshold&&t(a);else if(s.status&ce.Move&&n&ce.Start)return}n=0,o=0,r=[0,0],i=null}};ue?f(fe.pointer.events,n("pointer"),e):_e?f(fe.touch.events,n("touch"),e):f(fe.mouse.events,n("mouse"),e)},V.prototype.then=function(t,e){return t=K(t)?t:void 0,e=K(e)?e:void 0,(t||e)&&(this._isChainEnd=!1),this._state(this._value,t,e)},V.prototype.catch=function(t){return this.then(void 0,t)},V.resolve=function(t){var e=this;return Z(t)&&t instanceof this?t:new e(function(e){e(t)})},V.reject=function(t){return new this(function(e,n){n(t)})},V.all=function(t){var e=this;return new e(function(n,o){var r=t.length,i=new Array(r);return 0===r?n(i):void te(t,function(t,a){e.resolve(t).then(function(t){i[a]=t,0==--r&&n(i)},o)})})},V.race=function(t){var e=this;return new e(function(n,o){for(var r=0;r<t.length;r++)e.resolve(t[r]).then(n,o)})};var ve=function(t){throw t};V._overrideUnhandledExceptionHandler=function(t){ve=t};var me=function(){function t(){for(var t=0;o>t;t++){var e=n[t];n[t]=null,e()}o=0}var e;"undefined"!=typeof window&&window.postMessage?(window.addEventListener("message",t),e=function(){window.postMessage("macro-task","*")}):e=function(){setTimeout(t,0)};var n=new Array(16),o=0;return function(t){0===o&&e(),n[o++]=t}}();k=ie?ae.getSiteId():"",t._taq={_env:J,_tt_test_id:ae.getTestID(),_adInfoPromise:o(),monitor:_taq.monitor,context:_taq.context,push:function(t){(t.event_pixel_id||t.event_pixel_code)&&_taq.track(t)},track:function(t){if(!t.event_type)return void console.log("event_type is null");t.convert_id&&(P=t.convert_id);var e=function(){var e=_taq._assembleEventData(t);_taq._send_event(e.event,e.trackLogData)};oe&&re?V.all([oe,re]).then(function(){e()},function(){e()}):e()},getFromTTBridge:function(t,e){"adInfo"==t?F=h.FAIL:"appInfo"==t&&(D=h.FAIL),ae.retry(function(n){"function"==typeof ToutiaoJSBridge.call&&ToutiaoJSBridge.call(t,{},function(o){"adInfo"==t?F=h.SUCCESS:"appInfo"==t&&(D=h.SUCCESS),n(),e(o)}),setTimeout(function(){if(F==h.FAIL||D==h.FAIL){var t=new Error("jsbridge timeout error");n(t)}},400)},1)},_send_event:function(t,e){if(this._tt_test_id){var n=ae.getGWUrl();ae.sendHTTPLogEvent(n,t,e)}else{if(r("pixel_send",{pixelCode:e.context.pixel.code,extJSON:{event:e.event}}),ae.isInApp())try{ae._sendEvent(t),r("jsb_send",{pixelCode:e.context.pixel.code,extJSON:{event:e.event}})}catch(o){i("jsb_error",new Error("jsb send event error: "+o&&o.message))}if(ae.getFromSessionStorage("umeng_cid")||!ae.isInApp()){var n=ae.getGWUrl();ae.sendHTTPLogEvent(n,t,e)}}},_generateTrackLogData:function(t){var e={ad_id:t.ad_id,req_id:t.req_id,creative_id:t.cid,log_extra:t.log_extra,idc:t.idc,convert_id:t.convert_id,callback:t.callback,uid:t.user_id,device_id:t.device_id,ad_info_from:t.ad_info_from,ad_info_status:t.ad_info_status},n={};return{event:ae.getEventType(t.event_type),context:{ad:e,user:n,pixel:{code:t.event_pixel_code},page:{url:window.encodeURI(window.location.href),referrer:window.encodeURI(document.referrer)},library:{version:t.sdk_version,name:"pixel.js"}},tt_test_id:t.tt_test_id||void 0,timestamp:(new Date).toJSON()}},_assembleEventData:function(e){var n=x||ae.getCid()||ae.getFromSessionStorage("umeng_cid")||"",o=n,r=S||ae.getFromSessionStorage("umeng_log_extra")||"{}",i=M||ae.getFromSessionStorage("umeng_callback")||ae.getLocationParam("ttclid")||"",a=l,s=e.event_type||"",c=e.convert_id||"",d=e.event_pixel_code||"",u=y||ae.getFromSessionStorage("umeng_device_id")||"",_=I||T||"",f=decodeURIComponent(t.location.href),g=N||ae.getFromSessionStorage("umeng_idc")||"",v=w||ae.getReqId()||ae.getFromSessionStorage("_tt_req_id")||ae.getFromSessionStorage("umeng_req_id")||"",m=U||ae.getFromSessionStorage("umeng_ad_id")||"",p=this._tt_test_id,h=A,b=L,C="ad_analytics_msg",E="insight_log",q="ad_analytics_msg",P={value:o,log_extra:r,callback:i,page_url:f,sdk_version:a,event_type:s,event_pixel_code:d,user_id:_,device_id:u,tag:C,label:E,category:q,convert_id:c,cid:n,idc:g,callback:i,req_id:v,ad_id:m,tt_test_id:p,ad_info_from:h,ad_info_status:b},k=_taq._generateTrackLogData(P),F=JSON.stringify(k),D=ae.base64URI(F),R={category:q,tag:C,label:E,value:o,trackLogData:F,analytics_message:D};return{event:R,trackLogData:k}},_getPageInfo:function(){var t={},e=ae.getFromSessionStorage("umeng_cid");return t.req_id=w||ae.getReqId()||ae.getFromSessionStorage("umeng_req_id")||"",t.cid=x||ae.getCid()||"",""===t.cid&&e&&(t.cid=e,R=h.SUCCESS),t.site_id=k,t.ad_id=ae.getAdId(),t},_getDeviceInfo:function(){var t={};return t.device_id=y||ae.getFromSessionStorage("umeng_device_id")||"",t.user_id=I,t.uid=T||ae.getFromSessionStorage("umeng_uid")||"",t.ut=b||ae.getFromSessionStorage("umeng_ut")||"",t.client_version=C||ae.getFromSessionStorage("umeng_app_version")||"",t.version_code=E||ae.getFromSessionStorage("umeng_version_code")||"",t}};var pe={initMd5:function(){se.traversal(e.body,"0_body",0,p,function(t){v+=t}),m=md5(v)},bindEvent:function(){var t=this;le.addClickEvent(function(n){for(var o=n.target;o!=e;)"function"==typeof o.hasAttribute&&o.hasAttribute("tt-data-click")&&t._sendTargetMsg(o),o=o.parentNode},!0)},getInfoFromUrl:function(){M=ae.getLocationParam("ttclid")||"",ae.setToSessionStorage("umeng_callback",M);var t=ae.getWebUrlInfo();return t?(R=h.SUCCESS,c(ae.getAdId()||""),a(t.req_id||""),P=t.convert_id||"",d(t.cid||""),T=t.uid||"",b=t.ut||"",y=t.device_id||"",s(t.log_extra||""),C=t.version||"",E=t.version||"",N=t.idc||"",ae.setToSessionStorage("umeng_ad_id",U),ae.setToSessionStorage("umeng_req_id",w),ae.setToSessionStorage("umeng_cid",x),ae.setToSessionStorage("umeng_uid",T),ae.setToSessionStorage("umeng_ut",b),ae.setToSessionStorage("umeng_device_id",y),ae.setToSessionStorage("umeng_log_extra",S),ae.setToSessionStorage("umeng_app_version",C),ae.setToSessionStorage("umeng_version_code",E),ae.setToSessionStorage("umeng_idc",N),u("url"),{ad_id:U,req_id:w,cid:x,user_id:T,device_id:y,log_extra:S,idc:N}):!1},initFromSessionStorage:function(){var t=ae.getDefer(),e=ae.getDefer();if("ad"===ae.getFromSessionStorage("_tt_ad_info_success")){r("ad_info_init_start"),a(w||ae.getFromSessionStorage("_tt_req_id")),d(x||ae.getFromSessionStorage("_tt_cid")),P=P||ae.getFromSessionStorage("_tt_convert_id"),s(S||ae.getFromSessionStorage("_tt_log_extra")),F=h.UNUSE,j=h.SUCCESS,u("cache"),_("fulfilled(cache)");try{r("ad_info_init_end",{extJSON:{type:"from_cache",cache:JSON.stringify({req_id:w,cid:x,convert_id:P,log_extra:S})}})}catch(c){}t.resolve({req_id:w,cid:x,convert_id:P,log_extra:S})}else{var f;r("ad_info_init_start");var g=o(),l=g?g:new V(function(t){_taq.getFromTTBridge("adInfo",function(e){t(e)})});n(l),u("jsb"),_("pending"),l.then(function(e){var o;ae.isNewJSBirdgeSuccess(e)&&(e=e.data),e=e||{},"string"==typeof e&&(e=JSON.parse(e)),d(e.cid||e.ad_id||""),o=JSON.parse(e.log_extra||"{}"),a(o.req_id||""),P=o.convert_id||"",s(e.log_extra||"{}"),_("fulfilled"),r("ad_info_init_end"),x&&w&&(ae.setToSessionStorage("_tt_ad_info_success","ad"),ae.setToSessionStorage("_tt_cid",x),ae.setToSessionStorage("_tt_req_id",w),ae.setToSessionStorage("_tt_convert_id",P),ae.setToSessionStorage("_tt_log_extra",S)),t.resolve({req_id:w,cid:x,convert_id:P,log_extra:S}),n(oe),f&&clearTimeout(f)}),f=setTimeout(function(){i("jsb_error",new Error("jsb get ad info timeout")),t.reject({req_id:w,cid:x,convert_id:P,log_extra:S})},1e3)}return"app"===ae.getFromSessionStorage("_tt_app_info_success")?(y=y||ae.getFromSessionStorage("_tt_device_id"),I=I||ae.getFromSessionStorage("_tt_user_id"),C=C||ae.getFromSessionStorage("_tt_app_version"),E=E||ae.getFromSessionStorage("_tt_version_code"),q=q||ae.getFromSessionStorage("_tt_app_id"),D=h.UNUSE,e.resolve({device_id:y,user_id:I,app_version:C,version_code:E,app_id:q})):(_taq.getFromTTBridge("appInfo",function(t){ae.isNewJSBirdgeSuccess(t)&&(t=t.data),t=t||{},y=t.device_id||"",I=t.user_id||"",C=t.appVersion||"",E=t.versionCode||"",q=t.aid||"",g_net_type=t.netType||"",ae.setToSessionStorage("_tt_app_info_success","app"),ae.setToSessionStorage("_tt_device_id",y),ae.setToSessionStorage("_tt_user_id",I),ae.setToSessionStorage("_tt_app_version",C),ae.setToSessionStorage("_tt_version_code",E),ae.setToSessionStorage("_tt_app_id",q),e.resolve({device_id:y,user_id:I,app_version:C,version_code:E,app_id:q})}),setTimeout(function(){e.reject({device_id:y,user_id:I,app_version:C,version_code:E,app_id:q})},1e3)),oe=t.promise,re=e.promise,oe.then(null,function(){}),re.then(null,function(){}),{adInfo:t.promise,appInfo:e.promise}},_sendTargetMsg:function(e){var n={};n.page_url=decodeURIComponent(t.location.href),n.page_type=ie,n.event_type=e.getAttribute("tt-data-eventtype")||"",n.convert_id=e.getAttribute("tt-data-convertid")||"",n.event_value=e.getAttribute("tt-data-eventvalue")||"",n.target=e,n.options=e.getAttribute("tt-data-options")||"",_taq.push(n)}};if(t._taq.getCommonDataPromise=function(){var t=this._getPageInfo(),e=pe.getInfoFromUrl();return e?ae.combineData(t,e):ae.combineData(t,{req_id:w,cid:x,user_id:T,device_id:y,log_extra:S})},pe.initMd5(),!pe.getInfoFromUrl()&&ae.isInApp()&&pe.initFromSessionStorage(),pe.bindEvent(),B&&B.length>0)for(var he=0;he<B.length;he++)_taq.push(B[he])}function g(t,e){var n=document.createElement("script");n.src=t,e=e||function(){},n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(),this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this))},document.getElementsByTagName("head")[0].appendChild(n)}if(!t._tt_track){var l="0.0.31",v="",m="",p=20,h={FAIL:0,UNUSE:1,SUCCESS:2},S=null,w="",y="",I="",T="",b="",C="",E="",q="",x="",P="",U="",k="",F=h.UNUSE,D=h.UNUSE,A="",L="",R=h.UNUSE,j=(h.SUCCESS,h.UNUSE),N="",M="",O=document.currentScript;t._tt_track=[];var B=window._taq||[],J=window._taq._env,V=window[window.TiktokAnalyticsObject];B.context={data:{libraryInfo:{version:l,name:"pixel.js"},pageInfo:{url:location.href,referrer:location.referrer},pageSign:{sessionId:""},adInfo:{req_id:w,log_extra:S,ad_id:U,creative_id:x}}};var G=function(){return window.top!==window},X=function(){return G()?J.jsb.iframe:J.jsb.normal},H=X();H?(r("jsb_init_start"),g(H,function(){r("jsb_init_end"),f()})):f()}}(window,document);